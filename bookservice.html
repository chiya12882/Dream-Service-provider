
<%@page import="Model.User"%>
<%@page import="Model.City"%>
<%@page import="java.util.List"%>
<%@page import="Model.Service"%>
<%@page import="Dao.Dao"%>
<%! 
 User S=null;
%>
<!DOCTYPE html>
<html lang="en">
<head>
 
<title>Booking Service</title>
<link rel="stylesheet" href="css/us.css">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>

</head>
<body  >
  <div class=" wrapper">
    <div class="container-fluid ">
      <div class="header"><b>BOOK SERVICE</b></div>
    </div>
  <div class="row no-gutters" >
      
      <div class="col-md-2 mx-auto side-col">
          
          <div class="sidebar">
            <br><br><br>
            <ul>
              <li><a href="userHome.jsp"> <i class="fa fa-home" style="font-size:20px"> &nbsp;&nbsp;Home</i></a></li>
                    <li><a href="bookservice.jsp"><i class="fa fa-bookmark" style="font-size:20px">&nbsp;&nbsp;Book Service</i></a></li>
                    <li><a href="bookinghistory.jsp"><i class="fa fa-history" style="font-size:20px">&nbsp;&nbsp;Booking History</i></a></li>
                    <li><a href="contact.html"><i class="fa fa-phone" style="font-size:20px">&nbsp;&nbsp;Contact</i></a></li>
                    <li><a href="index.html"><i class="fa fa-sign-out" style="font-size:20px">&nbsp;&nbsp;Logout</i></a></li>
              </ul>
            
          </div>
      </div>
      <div class="col-md-10"style="background-image: url('images/image-asset.jpeg'); background-repeat: no-repeat; width: 100%; height: 700px; background-size: 100%;">
       
          
        <div class="main_content">
     
          <div class="info">
            
              <h1 style="text-align: center;"><small style="color: black; font-weight:900; font-family: Cambria, 
    Cochin, Georgia, Times, 'Times New Roman', serif;">  </small></b></h1>
      <div class="row">
      <div class="col-md-4 col-sm-4 col-xs-10"></div>
      <div class="col-md-4 col-sm-4 col-xs-10">            
            <form action="bookservice2.jsp" style=" padding: 10px 60px; margin-top: 40px; margin-bottom: 60px; color:rgb(14, 30, 63);
                  box-shadow:1px 4px 26px 11px rgba(0, 0, 0, 0.75)">
                  <h2><center>Book Service</center></h2><br>
              <div class="form-group">
                  <label for="user_id"><span class="glyphicon glyphicon-user"></span><b>User Id</b></label>
                  <% 
           String sbid;
           HttpSession sess = request.getSession(false); //use false to use the existing session
            sbid=(String)sess.getAttribute("user");
           //sbid=request.getParameter("txtUname");
           if(sbid!=null)
           {
                 
                 Dao sd=new Dao();
                 S=sd.searchByUser(sbid);
                 if(S==null)
                   out.println("<font color=red size=6 >Record not found........</font>");
                else
               {
               %>
              <br>
                  <input type="text" class="form-control" name="user_id"value=<%=S.getId()%> readonly >
                </div>
                   <%   
               }     
           }
           
           
   %>      
                   <div class="form-group">
                  <label for="name"><span class="glyphicon glyphicon-user"></span><b>Name</b></label>
                  <input type="text" class="form-control" name="name" placeholder="Full Name" >
                </div>
                  
                <div class="form-group">
                  <label for="mobile"><span class="glyphicon glyphicon-user"></span><b>Mobile No</b></label>
                  <input type="text" class="form-control" name="phoneno" placeholder="Enter 10 digit no"  pattern="[789][0-9]{9}">
                </div>
                <label for="service"><span class="glyphicon glyphicon-list-alt"></span><b>Select Service</b></label>
          <select id="service" name="service_id" class="form-control">
            <option >Select Service</option>
             <%
                    Dao d = new Dao();
                    List <Service> ls= d.getAllServices();
                    for(Service c : ls ){
                        
                    
                    
                    %>
                     <option value= "<%= c.getId() %>"><%= c.getService()%></option>
        <%
            }         
%>      
          </select><br>
               
                
                <div class="form-group">
                  <label for="description"><b>Description</b></label>
                  <textarea class="form-control" rows="5" name="description" placeholder="Description"></textarea>
                </div>
                <div class="form-group">
                  <label for="budget"><span class="glyphicon glyphicon-lock"></span><b>Budget</b></label>
                  <input type="text" class="form-control" name="budget" placeholder="Budget">
                </div>
           <div class="form-group">
                  <label for="date"><span class="glyphicon glyphicon-lock"></span><b>Booking Date</b></label>
                  <input type="date" class="form-control" name="booking_date" >
                </div>
          
          <div class="form-group">
                  <label for="add"><span class="glyphicon glyphicon-user"></span><b>Address</b></label>
                  <input type="text" class="form-control" name="add" placeholder="address" >
                </div>
          
           <div class="form-group">
                  <label for="city">City</label>
                 
                  <select id="city" name="city" class="form-control" id="exampleFormControlSelect" >
                    <option>Select city</option>
                     <%
                    Dao da = new Dao();
                    List <City> cit= d.getAllCities();
                    for(City ci : cit ){
                        
                    
                    
                    %>
                  <option value= "<%= ci.getId() %>"><%= ci.getName()%></option> 
                   <%
    }                      
%>            
                  </select>

                </div>
                <button type="submit" class="btn btn-block btn-danger" style="background-color:#032255; border:rgb(14, 30, 63)">Book Service</button><br>
              </form>
          </div>
        
            <div class="col-md-3 col-sm-3 col-xs-10"></div>
          </div>
          
          </div>
          
        </div>
    
        </div>   
  
  </div>
  
  <div class="footer " style="width: 100%;">

    <div class="row ">
        <div class="col-sm-4 mx-auto mt-3 mb-3 " style="text-align: center; height:fit-content; ">
  
            <h1 class="text-center " style="color:blanchedalmond; text-align: center; font-size: 30px; "> About<br>
                <small style="color: white; font-size:20px; text-align : center ">A service provider is an individual 
                    or entity that provides services to 
        another party.</small></h1>
        </div>
  
        <div class="col-sm-4 mx-auto text-center mt-3 mb-3 ">
            <h1 class="text-center " style="color: blanchedalmond; text-align: center;font-size: 30px; "> Quick Links<br>
                <small> <ul class="navbar-nav ">
                <li class="nav-item ">
                  <a class="nav-link " href="Home.html "  style="color: white; "> <i class="fa fa-home " style="font-size:20px "></i> &nbsp;Home</a>
                </li>
                <li class="nav-item ">
                  <a class="nav-link " href="about.html " style="color: white; "><i class="fa fa-info-circle " style="font-size:20px "></i>&nbsp;About</a>
                </li>
                <li class="nav-item ">
                  <a class="nav-link " href="contact.html "  style="color: white; "><i class="fa fa-phone " style="font-size:20px "></i>&nbsp;Contact us</a>
                </li>
                </ul></small></h1>
  
        </div>
        <div class="col-sm-4 mx-auto text-center mt-3 mb-3 ">
            <h1 class="text-center " style="color: blanchedalmond; text-align: left; font-size: 30px; "> Contact<br>
                <small style="color: white; ">  <i class="fa fa-envelope " style="font-size:20px "></i>&nbsp; serviceprovider@gmail.com<br>
              
               <i class="fa fa-phone " style="font-size:20px "></i>&nbsp;&nbsp; +91-9826787656<br>
               <i class="fa fa-map-marker " style="font-size:20px "></i>&nbsp; Indore, India<br></small></h1>
        </div>
    </div>
  </div>
  </body> 
  </html>
  <% 
    String id=null;
    id=request.getParameter("user_id");
    
    if(id!=null)
    session.setAttribute("user_id", id);
            
                 
         
                 
        
%>